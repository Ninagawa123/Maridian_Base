# Maridian_Base
(まだ開発中なのでドキュメントも日本語で進めます.）

メリディアンはヒューマノイドロボットの状態情報をデバイス間で循環させ、
ロボット側の制御マイコンとPCでのリアルタイム通信を実現するシステムです。
PC画面のシミュレーション結果と実際のロボット動作を高速通信で連動させます。
このデモでは、脱力状態のサーボロボットを手で動かすと、画面内のロボットも同様に動くということをテストできます。

UnityやROSと連携が可能で、ROS用Nodeのデモも含んでいます。

使用する機材は以下の4つです。
1.サーボロボット(KHR-4HV等)
2.Teensy4.0 (サーボ制御用)
3.ESP32devkitC (wifi通信用)
4.PC

デバイス間の連携は以下の経路での双方向通信となります。
サーボモーター-(半二重シリアル)-Teensy4.0-(SPI)-ESP32-(Wifi/UDP通信)-(アクセスポイント)-PC/Unity/ROS

メリディアンのプロトロコルはMeridim配列と命名したUDP通信１パケットに収まるコンパクトな書式です。
約90個のShort型のデータ配列で、30個分のサーボデータに加え、IMU情報やユーザーが作成したデータも盛り込むことができます。

#デモの使い方
まず、Meridian Boardを準備します。回路図の草案はpdfに同梱していますので、ブレッドボード等で作成することができます。
（今後、プリント基板を同人ハードとして頒布することも予定しています。）
次にMeridian_Base_for_Teensy40.ino,Meridian_Base_for_ESP32.inoのファイルをそれぞれTeensy4.0,ESP32に書き込みます。
最後に、手元の環境にROSパッケージを作成し、rosnode_meridim_base.pyを含めてください。

https://github.com/Ninagawa123/roid1_urdf
を実行してRvisで立ち上げた上、
先ほど作成したパッケージのrosnode_meridim_base.pyを実行すると、
ロボットの関節を手で動かした時の姿勢が、Rvis上のロボット画像にも反映されます。
